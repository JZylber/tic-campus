---
import type { Course } from "../aux/types";
import Layout from "../layouts/Layout.astro";
import Select from "../components/misc/select/Select.astro";
import Radio from "../components/misc/radio/Radio.astro";

const availableCourses: Course[] = [
  {
    name: "NR3A",
    subject: "Tecnologías de la Información",
    grade: 3,
    division: "A",
    year: 2025,
  },
  {
    name: "NR3B",
    subject: "Tecnologías de la Información",
    grade: 3,
    division: "B",
    year: 2025,
  },
  {
    name: "NR3C",
    subject: "Tecnologías de la Información",
    grade: 3,
    division: "C",
    year: 2025,
  },
  {
    name: "NR3D",
    subject: "Tecnologías de la Información",
    grade: 3,
    division: "D",
    year: 2025,
  },
  {
    name: "NR4C",
    subject: "Bases de Datos",
    grade: 4,
    division: "C",
    year: 2025,
  },
  {
    name: "NR4E",
    subject: "Bases de Datos",
    grade: 4,
    division: "E",
    year: 2025,
  },
  {
    name: "NR5A",
    subject: "Desarrollo de Aplicaciones Informáticas",
    grade: 5,
    division: "A",
    year: 2025,
  },
  {
    name: "NR5B",
    subject: "Desarrollo de Aplicaciones Informáticas",
    grade: 5,
    division: "B",
    year: 2025,
  },
  {
    name: "NR5C",
    subject: "Desarrollo de Aplicaciones Informáticas",
    grade: 5,
    division: "C",
    year: 2025,
  },
  {
    name: "NR5D",
    subject: "Desarrollo de Aplicaciones Informáticas",
    grade: 5,
    division: "D",
    year: 2025,
  },
  {
    name: "NR5E",
    subject: "Desarrollo de Aplicaciones Informáticas",
    grade: 5,
    division: "E",
    year: 2025,
  },
  {
    name: "NR5A",
    subject: "Desarrollo de Aplicaciones Informáticas",
    grade: 5,
    division: "F",
    year: 2025,
  },
];

const years = availableCourses.map((course) => course.year);
const uniqueYears = [...new Set(years)].map((year) => ({
  value: year,
  label: year.toString(),
}));

uniqueYears.push({
  value: 2026,
  label: "2026",
});
---

<Layout>
  <div
    x-data={`{ courses: ${JSON.stringify(availableCourses)}}`}
    class="absolute h-full w-full bg-gray-50 z-50 flex flex-col items-center justify-center"
    x-transition:leave="transition ease-out duration-300"
    x-transition:leave-start="opacity-100"
    x-transition:leave-end="opacity-0"
  >
    <div
      class="w-full h-full flex flex-col items-center justify-center overflow-y-scroll"
    >
      <h1 class="text-[30px] md:text-[36px] font-bold p-4">
        ¡Bienvenidos a TIC Campus!
      </h1>
      <h2 class="text-[16px] md:text-[20px] p-2">
        Estas son las materias disponibles
      </h2>
      <form
        x-data={`{year: ${uniqueYears[0].value}, grade: undefined}`}
        class="flex flex-col gap-y-2 py-2 px-8 md:flex-row md:gap-x-8 w-full"
      >
        <Select
          options={uniqueYears}
          title="Año"
          xModel="year"
          className="w-full md:w-1/4"
        />
        <Radio
          options={[
            { value: 3, label: "3" },
            { value: 4, label: "4" },
            { value: 5, label: "5" },
          ]}
          xModel="grade"
          title="Año escolar"
          className="w-full md:w-1/4"
        />
      </form>
    </div>
  </div></Layout
>
