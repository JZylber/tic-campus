---
import MarkTable from "../misc/MarkTable.astro";

interface Props {
  subject: string;
}

const { subject } = Astro.props;
---

<template x-data=`redoMarkData('${subject}')` x-if="redos && redos.length > 0">
  <div class="flex flex-col gap-y-2 py-4 border-t-2 border-gray-300">
    <h2 class="text-[20px] md:text-[24px] font-semibold">Recuperatorios</h2>
    <p class="text-[14px] md:text-[16px] text-gray-600">
      Actividades extraordinarias que sirven para recuperar TPS y actividades de
      clase. Las actividades cubiertas son aquellas que ya no son contabilizadas
      para el c√°lculo de la nota debido al recuperatorio.
    </p>
    <MarkTable columns="['Actividad', 'Nota', 'Actividades cubiertas']">
      <template x-for="redo in redos">
        <tr class="border-t border-gray-400">
          <td class="text-[14px] md:text-[16px] p-2">
            <span x-text="redo.name"></span>
          </td>
          <td class="p-2">
            <div class="w-full flex justify-center items-center">
              <div
                class="rounded-full flex justify-center items-center px-2 py-1 gap-x-2 border"
                x-bind:class="{
                          'bg-sh-light-red border-sh-medium-red text-sh-red': redo.mark < 6,
                          'bg-sh-light-yellow border-sh-medium-yellow text-sh-yellow': redo.mark >= 6}"
              >
                <span class="text-[14px] md:text-[16px]" x-text="redo.mark"
                ></span>
                <span class="text-[14px] md:text-[16px]" x-text="text(redo)">
                </span>
              </div>
            </div>
          </td>
          <td class="p-2">
            <div class="flex flex-wrap gap-1 justify-center">
              <template x-for="id in redo.coveredActivities">
                <div
                  class="rounded-full flex justify-center items-center px-2 py-0.5 bg-gray-300 text-gray-600"
                >
                  <span class="text-[12px] md:text-[14px]" x-text="name(id)"
                  ></span>
                </div>
              </template>
            </div>
          </td>
        </tr>
      </template>
    </MarkTable>
  </div>
</template>
